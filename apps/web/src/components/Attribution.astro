---
/**
 * Attribution Component (Astro)
 * Platform Charter: MANDATORY on all content
 * Zero JavaScript - pure HTML/CSS
 */
interface Props {
  author: string;
  authorUrl?: string;
  source?: string;
  sourceUrl?: string;
  date: Date | string;
  license?: string;
  aiDisclosure?: 'none' | 'ai-assisted' | 'ai-generated';
}

const {
  author,
  authorUrl,
  source = 'seethru.media',
  sourceUrl,
  date,
  license,
  aiDisclosure = 'none',
} = Astro.props;

const formattedDate =
  typeof date === 'string'
    ? date
    : date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });

const badgeLabels = {
  'ai-assisted': 'ðŸ¤– AI-Assisted',
  'ai-generated': 'ðŸ¤– AI-Generated',
};
---

<div class="attribution">
  <span class="attribution-author">
    By {authorUrl ? <a href={authorUrl}>{author}</a> : author}
  </span>

  {
    source && (
      <span class="attribution-source">
        Â· {sourceUrl ? <a href={sourceUrl}>{source}</a> : source}
      </span>
    )
  }

  <span class="attribution-date">Â· {formattedDate}</span>

  {license && <span class="attribution-license">{license}</span>}

  {
    aiDisclosure !== 'none' && (
      <span class={`attribution-badge attribution-badge--${aiDisclosure}`}>
        {badgeLabels[aiDisclosure]}
      </span>
    )
  }
</div>

<style>
  .attribution {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--color-text-muted, #666);
  }

  .attribution a {
    color: var(--color-primary, #0066cc);
    text-decoration: none;
  }

  .attribution a:hover {
    text-decoration: underline;
  }

  .attribution-license {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    background: var(--color-surface-elevated, #f0f0f0);
    border-radius: 4px;
  }

  .attribution-badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
  }

  .attribution-badge--ai-assisted {
    background: hsl(210, 80%, 90%);
    color: hsl(210, 80%, 30%);
  }

  .attribution-badge--ai-generated {
    background: hsl(38, 92%, 90%);
    color: hsl(38, 92%, 30%);
  }
</style>
